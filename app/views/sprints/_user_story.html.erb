<hr>

<div class="row user-story" id="user_story_container_<%= user_story.id %>">
  <div class="three columns">
    <%= render :partial => 'sprints/user_story_card', :locals => {:sprint => sprint, :user_story => user_story, :tasks => true} %>
  </div>
  <div class="six columns offset-by-one tasks incomplete" id="incomplete_<%= user_story.id %>">
    <%= render :partial => 'sprints/task_card', :collection => user_story.tasks.rank(:order).incomplete, :locals => {:sprint => sprint, :user_story => user_story, :claim => true} %>
  </div>
  <div class="six columns offset-by-one tasks inprogress" id="inprogress_<%= user_story.id %>">
    <%= render :partial => 'sprints/task_card', :collection => user_story.tasks.rank(:order).inprogress, :locals => {:sprint => sprint, :user_story => user_story, :claim => true} %>
  </div>
  <div class="six columns offset-by-one tasks complete" id="complete_<%= user_story.id %>">
    <%= render :partial => 'sprints/task_card', :collection => user_story.tasks.rank(:order).complete, :locals => {:sprint => sprint, :user_story => user_story, :claim => false} %>
  </div>
</div>

<% unless sprint.finished? %>
  <% content_for :custom_js do %>
    setupTaskBoard(<%= user_story.id %>);
  <% end %>
<% end %>

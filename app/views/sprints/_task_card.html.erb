<dl id="task_card_<%= task_card.id %>" class="task_card" title="<%=h task_card.definition %>">
  <dt class="clearfix">
    <% if current_user.is_a?(TeamMember) %>
      <strong><%= "##{user_story.id}.#{task_card.position}" %></strong>
      <% if defined?(sprint) %>
        <%= link_to 'Edit', edit_sprint_user_story_url(sprint, user_story, :anchor => "user_story_tasks"), :title => "Edit ##{user_story.id}.#{task_card.position}", :class => "edit" unless sprint.finished? %>
      <% else %>
        <%= link_to 'Edit', edit_user_story_url(user_story, :anchor => "user_story_tasks"), :title => "Edit ##{user_story.id}.#{task_card.position}", :class => "edit" %>
      <% end %>
    <% else %>
      <%= "##{user_story.id}.#{task_card.position}" %>
    <% end %>
  </dt>
  <dd class="definition">
    <%= h truncate(task_card.definition, :length => 60) %>
    <strong><%= show_assignees(task_card.developers) %></strong>
  </dd>
  <% if sprint && !sprint.finished? %>
    <dd class="tasks clearfix">
    <%= form_for task_card, :url => user_story_task_path(:user_story_id => task_card.user_story, :id => task_card), :html => {:method => :put, :class => 'task_card_form'}, :remote => true do |f| %>
      <%= f.text_field(:hours, :size => 3) %>
      <%= submit_tag 'Save', :class => 'tasksavehours' %>
      <% if claim %>
        <% if task_card.developers.include?(current_user) %>
          <%= hidden_field_tag "claimtype_#{task_card.id}", 'renounce' %>
          <%= submit_tag 'Renounce', :class => 'taskrenounce', :id => "givetake_#{task_card.id}" %>
        <% else %>
          <%= hidden_field_tag "claimtype_#{task_card.id}", 'claim' %>
          <%= submit_tag 'Claim', :class => 'taskclaim', :id => "givetake_#{task_card.id}" %>
        <% end %>
      <% end %>
    <% end %>
    </dd>
  <% else %>
    <dd class="tasks clearfix"><%= pluralize(task_card.hours, "hours") %> remaining</dd>
  <% end %>
</dl>
